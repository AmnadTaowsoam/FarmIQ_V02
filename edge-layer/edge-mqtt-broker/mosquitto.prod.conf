# Production Mosquitto Configuration with TLS

# Per listener settings
per_listener_settings
  allow_anonymous false
  max_connections -1
  max_inflight_messages 1000
  max_queued_messages 10000

# Listeners
listener 1883
  protocol mqtt
  allow_anonymous false
  max_connections -1
  max_inflight_messages 1000
  max_queued_messages 10000

listener 8883
  protocol mqtt
  allow_anonymous false
  max_connections -1
  max_inflight_messages 1000
  max_queued_messages 10000
  certfile /mosquitto/config/certs/server.crt
  keyfile /mosquitto/config/certs/server.key
  require_certificate true

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_dest syslog
log_type all
log_timestamp true
connection_messages true
log_type debug

# Security
persistence false
persistence_location /mosquitto/data/mosquitto.db
autosave_interval 1800

# Access Control List (ACL)
acl_file /mosquitto/config/aclfile

# Authentication
allow_anonymous false
password_file /mosquitto/config/passwordfile
