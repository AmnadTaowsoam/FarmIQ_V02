# Server
PORT=8000
HOST=0.0.0.0
LOG_LEVEL=INFO
LOG_FORMAT=json

# Service metadata (Datadog)
DD_SERVICE=cloud-analytics-service
DD_ENV=development
DD_LOGS_INJECTION=true

# Dependencies
DATABASE_URL=postgresql://farmiq:farmiq_dev@postgres:5432/farmiq
RABBITMQ_URL=amqp://farmiq:farmiq_dev@rabbitmq:5672/

# Consumer
CONSUMER_ENABLED=true
RABBITMQ_QUEUE_NAME=farmiq.cloud-analytics-service.kpi.queue
RABBITMQ_PREFETCH=50

# Analytics rules (MVP)
WEIGHT_DELTA_ANOMALY_THRESHOLD_KG=2.0

# Internal service URLs (docker-compose)
FEED_SERVICE_URL=http://cloud-feed-service:5130
BARN_RECORDS_SERVICE_URL=http://cloud-barn-records-service:3000
WEIGHVISION_READMODEL_URL=http://cloud-weighvision-readmodel:3000
STANDARDS_SERVICE_URL=http://cloud-standards-service:3000

# Insights orchestrator (sync)
INSIGHTS_ORCHESTRATOR_ENABLED=true
LLM_INSIGHTS_BASE_URL=http://cloud-llm-insights-service:8000
READY_CHECK_LLM_INSIGHTS=true
# LLM orchestration timeout (guardrailed to 8â€“12s)
# Prefer ms; seconds is supported for backward compatibility.
LLM_TIMEOUT_MS=10000
LLM_TIMEOUT_S=10
LLM_MAX_RETRIES=1

# Optional ML forecast fallback (disabled by default)
ML_FALLBACK_ENABLED=false
ML_MODEL_BASE_URL=http://cloud-ml-model-service:8000
ML_TIMEOUT_S=4
ML_MAX_RETRIES=2
ML_FORECAST_MODEL_KEY=WEIGHT_TIMESERIES_V1
ML_FORECAST_HORIZON_DAYS=7

# Optional: best-effort in-app notification creation after insights generation
NOTIFICATIONS_ENABLED=true
NOTIFICATIONS_TIMEOUT_MS=2000
NOTIFICATION_SERVICE_URL=http://cloud-notification-service:3000
